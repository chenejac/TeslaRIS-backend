@startuml

'TODO: Da li uri kod ovih objekata predstavlja ID?
'TODO: Za sta suzi locale
'TODO: Sta da radim sa reocrd DTO
'TODO: Author Position i Title razlike?
'TODO: Da li treba JMBG u autora
'TODO: Sta je PAVNT
'TODO: Da li treba za autora is active
'TODO: Fizicko ili logicko brisanje
'TODO: Da li da autora identifikujemo preko ID foregin key ili preko emaila ili kako vec
'TODO: Da li se Author ima id Usera ili User ima id Authora 

enum Sex {
  MALE
  FEMALE
}

enum ApproveStatus {
  REQUESTED
  APPROVED
  DECLINED
}

class Language {
  -String value
}


' TODO: Ekvivalent RecordDTO klasi, cilj je da se zajednicki metapodaci za razlicite entitete modeluju kako bi bili lako dostupni

class MultiLingualContent {
  Language language
  String content
  int priority
}

class GeoLocation {
  Double longitude
  Double latitude
  int precisionInMeters
}

  class AuthorName {
    -Stirng firstname
    -Stirng otherName
    -Stirng lastame
    -LocalDateTime validFrom ' TODO: edit
  }


package user {
  
  class Permission {
    -String name
  }
  
  class Authority {
    -String name
    -Set<Permission> permissions 
  }


  class User {
    -String email
    -String password
    -String note
    -Stirng firstname
    -Stirng lastname
    -Language preferedLanguage
    -boolean isActive
    -Authority authority
    -Person person
    -OrganisationalUnit organisationalUnit
  }

  class UserActivation {
    -String code
    -LocalDateTime timestamp
  }
  UserActivation -> User
}




package person {

  class Person {
    -AuthorName authorName
    -Set<AuthorName> otherNames
    +String name()
    -Set<TitleOrganisationalUnit> titleOrganisationalUnit
    -Set<MultiLingualContent> biography
    -Set<MultiLingualContent> keyword
    -String contactEmail
    -String phoneNumber
    -String apvnt
    -String mnid
    -String ORCID
    -String scopusAuthorId
    -int oldId
    -Set<ResearchArea> researchAreas 

  }
  ' TODO: What is other format names


  class PersonalInfo {
    -LocalDate localBirth
    -String placeOfBrith
    -String state
    -String address
    -Stirng city
    -Sex sex
  }

  class PersonOrganisationalUnit {
    -LocalDate from
    -LocalDate to
    -String position
    -String title
    -ApproveStatus approveStatus
  }


' TODO: Da li ce nekada biti potrebna instorija kada je dobio koje zvanje, da li je potrebna samo zadnja institucija ili?
  class TitleOrganisationalUnit {
    -int year
    -Set<MultiLingualContent> thesisTitle
    -Set<MultiLingualContent> title
    -Set<MultiLingualContent> shortTitle
    -Set<MultiLingualContent> organisationalUnitName
    ' -OrganisationalUnit organisationalUnit
    ' -Thesis thesis
  }


}


' TODO: Sta je someName
package institution {
  class OrganisationalUnit {
    -Set<MultiLingualContent> name
    -String acronym
    -Set<MultiLingualContent> keyword
    -Set<ResearchArea> researchAreas
    -GeoLocation location
  }
  OrganisationalUnit "1" --> "0..1" OrganisationalUnit

  class OrganisationalUnitLink {
    OrganisationalUnitLink baseOrganisationalUnit
    RelationType relationType
    OrganisationalUnit organisationalUnit
    LocalDateTime fromDate
    LocalDateTime toDate
  }

  class ResearchArea {
    -Set<MultiLingualContent> name
    -Set<MultiLingualContent> description
  }
  ResearchArea "1" --> "*" ResearchArea

  enum RelationType {
    BELONGS_TO
    MEMBER_OF
  }

}

' TODO: za svaki tip publikacije dodati zasebnu klasu ili modelovati sve u jednoj velikoj tabeli
package document {

  class PublisherName {
    -String name
    -String place
    -String state
    -Language language
  }

  class Publisher {
    -Set<PublisherName> name
  }

  class PersonContribution {
    -Person person
    -Set<MultiLingualContent> contributionDescription
    -boolean mainAuthor
  }

  ' TODO
  class CorrespondingAuthor {
    
  }

  class DocumentFile {
    string filename
    string serverFilename
    string description
    string mainType
  }

  ' TODO: Sta je alphabet???
  class Document {
    -Set<MultiLingualContent> title
    -Set<MultiLingualContent> subTitle
    -Set<MultiLingualContent> description
    -Set<MultiLingualContent> note
    -Set<PersonContribution> authors
    -Set<string> uris
    -String documentDate
    -Set<String> filename  ' TODO: Dodati novu klasu za filename sa metapodatcima
    -Set<MultiLingualContent> keywords
    -ApproveStatus approveStatus
    -String note
    -String doi
    -String scopusId
  }

  class ProceedingsPublication extends Document {
    -String startPage;
	  -String endPage;
    -Integer numberOfPages
  }

  class Proceedings {
    -Conference conference
    -String eISBN
    -String printISBN
    -Integer numberOfPages
    -String editionTitle
    -String editionISSN
    -Set<Language> languages
    -Set<MultiLingualContent> nameAbbreviation
    -Journal journal
  }

  class Conference {
    -Set<MultiLingualContent> name
    -Event event
    -String number
    -String fee
  }

  class Event {
    -String title
    -LocalDate dateFrom
    -LocalDate dateTo
    -String state
    -String place
  }

  class PersonContribution {
    ' TODO
  }

  ProceedingsPublication "1..*" --> "1" Proceedings
  Proceedings "1..*" --> "1" Conference

  ' Sta su paperType, start i end page?
  class JournalPublication extends Document {
    -String startPage;
	  -String endPage;
	  -String totalPages;
    -Stirng articleNumber
    -String volume
	  -String issue
  }

  class Journal {
    -String eIssn
    -String printIssn
    -Set<JournalEditors> journalEditors
    -Set<Language> languages
    -Set<MultiLingualContent> nameAbbreviation
  }

  class JournalEditors {
    -Person person
    -LocalDate from
    -LocalDate to
  }

  JournalPublication "1..*" --> "1" Journal

  ' TODO: Da li je poglavlje u monografiji dovoljno da se modeluje kao monografija pa da se u author contibution navede ko je sta radio
  class MonographPublication extends Document {
    -String startPage;
	  -String endPage
  }

  class Monograph extends Document {
    -String eISBN
    -String printISBN
    -Integer numberOfPages
    -String editionTitle
    -Integer editionNumber
    -String editionISSN

    ' TODO Editors link
    -Set<Person> editors
    -Set<Language> originalLanguages
    -ResearchArea researchArea
  }

  MonographPublication "1..*" --> "1" Monograph

  class Patent extends Document {
    -String number;
  }

  class InformativeAttachment extends Document {
  }

  class EncyclopedicContribution extends Document {
  }

  class LexicographicContribution extends Document {
  }

  class ScientificCritic extends Document {
  }

  class Polemics extends Document {
  }

  class Thesis extends Document {
    -OrganisationalUnit organisationalUnit
    -ThesisCategory category
  }

  class Product extends Document {
    -ProductCategory category
    -String internalNumber
  }

  class Software extends Document {
    -ProductCategory category
    -String internalNumber
  }

  enum ThesisCategory {
    MR
    PHD
    MASTER
    BACHELOR
  }

  enum ProductCategory {
    DATASET
    SOFTWARE
    TECHNICAL_SOLUTION
  }

  enum OtherPublicationCategory {
    INFORMATIVE_ATTACHMENT
    ENCYCLOPEDIC_CONTRIBUTION
    LEXICOGRAPHIC_CONTRIBUTION
    SCIENTIFIC_CRITIC
    POLEMICS
  }

  Document "1" --> "1..*" PersonContribution
  Monograph "0..*" --> "1" Publisher
  Proceedings "0..*" --> "1" Publisher
  Patent "0..*" --> "1" Publisher
  Product "0..*" --> "1" Publisher

}

@enduml

