@startuml

'TODO: Da li uri kod ovih objekata predstavlja ID?
'TODO: Za sta suzi locale
'TODO: Sta da radim sa reocrd DTO
'TODO: Author Position i Title razlike?
'TODO: Da li treba JMBG u autora
'TODO: Sta je PAVNT
'TODO: Da li treba za autora is active
'TODO: Fizicko ili logicko brisanje
'TODO: Da li da autora identifikujemo preko ID foregin key ili preko emaila ili kako vec
'TODO: Da li se Author ima id Usera ili User ima id Authora 

enum Sex {
  MALE
  FEMALE
}

enum ApproveStatus {
  REQUESTED
  APPROVED
  DECLINED
}

class Language {
  -String value
}


' TODO: Ekvivalent RecordDTO klasi, cilj je da se zajednicki metapodaci za razlicite entitete modeluju kako bi bili lako dostupni

class MultiLingualContent {
  Language language
  String content
  int priority
}

class GeoLocation {
  Double longitude
  Double latitude
  int precisionInMeters
}

  class AuthorName {
    -Stirng firstname
    -Stirng otherName
    -Stirng lastame
    -LocalDateTime from ' TODO: edit
    -LocalDateTime to
  }


package user {
  
  class Permission {
    -String name
  }
  
  class Authority {
    -String name
    -Set<Permission> permissions 
  }


  class User {
    -String email
    -String password
    -String note
    -Stirng firstname
    -Stirng lastname
    -Language preferedLanguage
    -boolean isActive
    -Authority authority
    -Person person
    -OrganisationalUnit organisationalUnit
  }

  class UserActivation {
    -String code
    -LocalDateTime timestamp
  }
  UserActivation -> User
}




package person {

  class Person {
    -AuthorName authorName
    -Set<AuthorName> otherNames
    +String name()
    -Set<TitleOrganisationalUnit> titleOrganisationalUnit
    -Set<MultiLingualContent> biography
    -Set<MultiLingualContent> keyword
    -String contactEmail
    -String phoneNumber
    -String apvnt
    -String mnid
    -String ORCID
    -String scopusAuthorId
    -int oldId
    -Set<ResearchArea> researchAreas
    -ApproveStatus approveStatus

  }
  ' TODO: What is other format names


  class PersonalInfo {
    -LocalDate localBirth
    -String placeOfBrith
    -String state
    -String address
    -Stirng city
    -Sex sex
  }

  class PersonOrganisationalUnit {
    -LocalDate from
    -LocalDate to
    -String position
    -String title
    -ApproveStatus approveStatus
  }


' TODO: Da li ce nekada biti potrebna instorija kada je dobio koje zvanje, da li je potrebna samo zadnja institucija ili?
  class TitleOrganisationalUnit {
    -int year
    -Set<MultiLingualContent> thesisTitle
    -Set<MultiLingualContent> title
    -Set<MultiLingualContent> shortTitle
    -Set<MultiLingualContent> organisationalUnitName
    ' -OrganisationalUnit organisationalUnit
    ' -Thesis thesis
    -ApproveStatus approveStatus
  }


}


' TODO: Sta je someName
package institution {
  class OrganisationalUnit {
    -Set<MultiLingualContent> name
    -String acronym
    -Set<MultiLingualContent> keyword
    -Set<ResearchArea> researchAreas
    -GeoLocation location
    -ApproveStatus approveStatus
  }
  OrganisationalUnitLink "*" --> "1" OrganisationalUnit : source
  OrganisationalUnitLink "*" --> "1" OrganisationalUnit : target

  class OrganisationalUnitLink {
    OrganisationalUnit sourceOrganisationalUnit
    OrganisationalUnit targetOrganisationalUnit
    RelationType relationType
    LocalDateTime fromDate
    LocalDateTime toDate
    -ApproveStatus approveStatus
  }

  class ResearchArea {
    -Set<MultiLingualContent> name
    -Set<MultiLingualContent> description
  }
  ResearchArea "1" --> "*" ResearchArea

  enum RelationType {
    BELONGS_TO
    MEMBER_OF
  }

}

' TODO: za svaki tip publikacije dodati zasebnu klasu ili modelovati sve u jednoj velikoj tabeli
package document {

  enum DocumentContributionType {
    AUTHOR
    EDITOR
    REVIEWER
    ADVISOR  ' TODO: check contribution types at https://credit.niso.org/ and https://github.com/EuroCRIS/CERIF-Vocabularies/blob/master/PersonOutputContributions.xml
  }

  class Publisher {
    -Set<MultiLingualContent> name
    -Set<MultiLingualContent> place
    -Set<MultiLingualContent> state
  }

  class PersonContribution {
    -Person person
    -Set<MultiLingualContent> contributionDescription
    -int orderNumber
    -ApproveStatus approveStatus ' TODO: maybe we need here a new enumeration, whether contribution is claimed or not by author
  }

  class PersonDocumentContribution extends PersonContribution {
      -DocumentContributionType contributionType
      -boolean mainContributor
      -boolean correspondingContributor
  }

  ' TODO
  class CorrespondingAuthor {
    
  }

  class DocumentFile {
    string filename
    string serverFilename
    string description
    string mainType
  }

  class Document {
    -Set<MultiLingualContent> title
    -Set<MultiLingualContent> subTitle
    -Set<MultiLingualContent> description
    -Set<MultiLingualContent> note
    -Set<PersonDocumentContribution> contributors
    -Set<string> uris
    ' TODO Should we change to String or use LocalDate
    -String documentDate
    -DocumentFile fileItem
    -DocumentFile proof
    -Set<MultiLingualContent> keywords
    -ApproveStatus approveStatus
    -String note
    -String doi
    -String scopusId
  }

  class ProceedingsPublication extends Document {
    -String startPage;
	-String endPage;
    -Integer numberOfPages
    -String articleNumber
  }

  class Proceedings extends Document {
    -String eISBN
    -String printISBN
    -Integer numberOfPages
    -String editionTitle
    -Integer editionNumber
    -String editionISSN
    -Set<Language> languages
    -Journal journal
    -String journalVolume
    -String journalIssue
  }

  class Conference extends Event{
    -String number
    -String fee
  }

  class Event {
    -Set<MultiLingualContent> name
    -Set<MultiLingualContent> nameAbbreviation
    -LocalDate dateFrom
    -LocalDate dateTo
    -Set<MultiLingualContent> state
    -Set<MultiLingualContent> place
    -Set<PersonEventContribution> conferenceContributors
  }

  enum ConferenceContributionType {
      ORGANIZATION_BOARD_CHAIR
      ORGANIZATION_BOARD_MEMBER
      REVIEWER
      PROGRAMME_BOARD_MEMBER  ' TODO: check other types here - https://github.com/EuroCRIS/CERIF-Vocabularies/blob/master/PersonEventInvolvements.xml
    }

  ProceedingsPublication "1..*" --> "1" Proceedings
  Proceedings "1..*" --> "1" Conference

  ' Sta su paperType, start i end page?
  class JournalPublication extends Document {
    -String startPage;
	  -String endPage;
    -Integer numberOfPages
    -String articleNumber
    -String volume
	-String issue
  }

  class Journal {
    -String eIssn
    -String printIssn
    -Set<PersonJournalContribution> journalContributors
    -Set<String> languages
    -Set<MultiLingualContent> nameAbbreviation
  }

  class PersonJournalContribution extends PersonContribution {
       -JournalContributionType contributionType
       -LocalDate from
       -LocalDate to
  }

  enum JournalContributionType {
        EDITOR
        ASSOCIATE_EDITOR
        REVIEWER
        SCIENTIFIC_BOARD_MEMBER
      }


  JournalPublication "1..*" --> "1" Journal

  ' TODO: Da li je poglavlje u monografiji dovoljno da se modeluje kao monografija pa da se u author contibution navede ko je sta radio
  class MonographPublication extends Document {
    -String startPage;
	-String endPage
    -Integer numberOfPages
    -String articleNumber
  }

  class Monograph extends Document {
    -String printIsbn
    -String eIsbn
    -Integer numberOfPages
    -String editionTitle
    -Integer editionNumber
    -String editionISSN
    -Set<Language> languages
    -ResearchArea researchArea
  }

  MonographPublication "1..*" --> "1" Monograph

  class Patent extends Document {
    -String number;
  }

  class InformativeAttachment extends Document {
  }

  class EncyclopedicContribution extends Document {
  }

  class LexicographicContribution extends Document {
  }

  class ScientificCritic extends Document {
  }

  ScientificCritic "1..*" --> "1" Journal

  ScientificCritic "1..*" --> "1" Monograph

  ScientificCritic "1..*" --> "1" Proceedings

  class Polemics extends Document {
  }

  Polemics "1..*" --> "1" Journal

  Polemics "1..*" --> "1" Monograph

  Polemics "1..*" --> "1" Proceedings

  class Thesis extends Document {
    -OrganisationalUnit organisationalUnit
    -ThesisCategory category
    -Integer numberOfPages
    -Set<Language> languages
    -ResearchArea researchArea
  }

  class Dataset extends Document {
    -String internalNumber
  }

  class Software extends Document {
    -String internalNumber
  }

  enum ThesisCategory {
    MR
    PHD
    MASTER
    BACHELOR
  }

  Document "1" --> "1..*" PersonContribution
  Document "1" --> "1..*" PersonDocumentContribution
  Journal "1" --> "1..*" PersonJournalContribution
  Event "1" --> "1..*" PersonEventContribution
  Thesis "0..*" --> "1" Publisher
  Monograph "0..*" --> "1" Publisher
  Proceedings "0..*" --> "1" Publisher
  Patent "0..*" --> "1" Publisher
  Dataset "0..*" --> "1" Publisher
  Software "0..*" --> "1" Publisher

}

@enduml

